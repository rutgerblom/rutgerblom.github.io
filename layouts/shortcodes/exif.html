{{- $imageName := .Get "src" -}}
{{- $alt := .Get "alt" -}}
{{- $originalImage := resources.Get $imageName -}}

{{ if not $originalImage }}
  {{ errorf "EXIF shortcode error: Image '%s' not found in assets" $imageName }}
{{ end }}

<figure>
  {{ with $originalImage }}
    <img src="{{ .RelPermalink }}" alt="{{ $alt }}">
  {{ else }}
    <p>Error: Image {{ $imageName }} not found</p>
  {{ end }}
</figure>

<figure>
<img src="{{ $originalImage.RelPermalink }}" alt="{{ $alt }}">

{{ with $originalImage.Exif }}
 <figcaption>{{ $alt }}
 <br />{{with   .Tags.Model }}{{ . }}   {{ end }}   {{with   .Tags.LensModel }}{{ . }}   {{ end }}   {{ with   .Tags.FNumber }}<i>f</i>{{ . }}   {{ end }}   {{ with   .Tags.FocalLength }}   {{ . }}mm{{ end }}   {{ with   .Tags.ExposureTime }}   {{ partial   "format-exposure-time.html"   . }}   {{ end }}   {{ with   .Tags.ISOSpeedRatings }} ISO {{ . }}{{ end }}
 <br />{{with   .Tags.Artist }}{{ . }} - {{ end }}   {{with   .Tags.DateTimeOriginal }}   {{ . }} - {{ end }}   {{ with   .Tags.Copyright}}{{ . }}{{ end }}
 </figcaption>

{{ end }}
</figure>